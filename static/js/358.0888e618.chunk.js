(self.webpackChunkweb=self.webpackChunkweb||[]).push([[358],{9629:(e,r,t)=>{t.d(r,{e:()=>p});t(6665);var o=t(3929),n=t(3668),i=t(6283),s=t(5708),a=t(558),l=t(2167),c=t(4667),d=t(2348),u=t(397);function m(){const e=(0,l.cq)(),{width:r}=(0,a.A)(),{colors:t}=(0,c.D)(),n=r<768;return(0,u.jsx)(o.A,{style:[h.container,n&&h.containerMobile,{backgroundColor:t.background.primary,borderTopColor:t.border}],children:(0,u.jsx)(o.A,{style:[h.content,n&&h.contentMobile],children:(0,u.jsx)(o.A,{style:[h.linksContainer,n&&h.linksContainerMobile],children:(0,u.jsxs)(o.A,{style:[h.linkGroup,n&&h.linkGroupMobile],children:[(0,u.jsx)(s.A,{onPress:()=>e.navigate("Terms"),children:(0,u.jsx)(i.A,{style:[h.link,{color:t.text.secondary}],children:"Terms of Service"})}),(0,u.jsx)(i.A,{style:[h.separator,{color:t.text.tertiary}],children:"\u2022"}),(0,u.jsx)(s.A,{onPress:()=>e.navigate("Privacy"),children:(0,u.jsx)(i.A,{style:[h.link,{color:t.text.secondary}],children:"Privacy Policy"})}),(0,u.jsx)(i.A,{style:[h.separator,{color:t.text.tertiary}],children:"\u2022"}),(0,u.jsx)(s.A,{onPress:()=>e.navigate("Contact"),children:(0,u.jsx)(i.A,{style:[h.link,{color:t.text.secondary}],children:"Contact Us"})})]})})})})}const h=n.A.create({container:{width:"100%",padding:d.Y.LARGE},containerMobile:{padding:0},content:{padding:0,borderTopWidth:1,maxWidth:1200,marginHorizontal:"auto"},contentMobile:{flexDirection:"column",gap:8},linksContainer:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center"},linksContainerMobile:{flexDirection:"column",gap:d.Y.SMALL},linkGroup:{flexDirection:"row",alignItems:"center",gap:d.Y.LARGE},linkGroupMobile:{gap:8},link:{fontSize:14},separator:{fontSize:14}}),p=({children:e,showFooter:r=!0})=>{const{colors:t}=(0,c.D)();return(0,u.jsxs)(o.A,{style:[g.container,{backgroundColor:t.background.primary}],children:[(0,u.jsx)(o.A,{style:g.content,children:e}),r&&(0,u.jsx)(m,{})]})},g=n.A.create({container:{flex:1,display:"flex",flexDirection:"column"},content:{flex:1,width:"100%"}})},415:(e,r,t)=>{t.d(r,{I:()=>p});var o=t(6665),n=t(3929),i=t(3668),s=t(2933),a=t(8481),l=t(4667),c=t(6680),d=t(2167),u=t(9058),m=t(2419),h=t(397);const p=({foils:e,allFoils:r,columns:t,searchQuery:i,onSearch:p,onUpdateFoils:y,renderHeader:f,renderControls:x,onColumnVisibilityChange:b,onResetColumns:A,filterOptions:v,selectedFilters:w,onFilterChange:j,onClearFilters:C})=>{const{colors:S}=(0,l.D)(),[k,I]=(0,o.useState)(!1),[T,D]=(0,o.useState)(""),O=(0,d.lq)(),R="Comparison"===O.name,B="Quiver"===O.name,F=o.useMemo((()=>R||B?{brands:Array.from(new Set(e.map((e=>e.brand)))),series:Array.from(new Set(e.map((e=>e.series)).filter((e=>!!e)))),types:Array.from(new Set(e.map((e=>e.type)).filter((e=>"front"===e||"tail"===e))))}:v),[R,B,e,v]),{filteredFoils:N}=(0,m.c)(R||B?e:r,w||{brands:[],series:[],type:[]}),{searchedFoils:q}=(0,c.P)(R||B?r:N,i),P=o.useMemo((()=>{if(R||B){if(i){return[...N,...q.filter((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))))]}return N}if(i){const r=q.filter((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))));return[...e,...r]}return e}),[e,N,q,i,R,B]),{sortOption:U,setSortOption:E,sortedFoils:_}=(0,u.A)(P),Q=(0,o.useCallback)((r=>{const t=e.filter((e=>!(e.model===r.model&&e.brand===r.brand)));y?.(t),D(`Removed ${r.model} from your comparison`),I(!0),setTimeout((()=>I(!1)),2e3)}),[e,y]),z=(0,o.useCallback)((r=>{const t=e.some((e=>e.model===r.model&&e.brand===r.brand));if(t&&R){window.confirm(`Are you sure you want to remove ${r.model} from your comparison?`)&&Q(r)}else{if(t){const t=e.filter((e=>!(e.model===r.model&&e.brand===r.brand)));y?.(t),D(`Removed ${r.model} from your collection`)}else y?.([...e,r]),D(`Added ${r.model} to your collection`);I(!0),setTimeout((()=>I(!1)),2e3)}}),[e,y,R,Q]),V=(0,o.useCallback)((r=>!!R&&(!!i&&!e.some((e=>e.model===r.model&&e.brand===r.brand)))),[e,R,i]),M=(0,o.useCallback)((r=>!e.some((e=>e.model===r.model&&e.brand===r.brand))),[e]);return(0,h.jsxs)(n.A,{style:[g.container,{backgroundColor:S.background.primary}],children:[f?.(),(0,h.jsx)(n.A,{style:g.content,children:(0,h.jsx)(s.o,{foils:_,columns:t,sortOption:{field:U.field,ascending:"asc"===U.direction},onSort:e=>{E((r=>({field:e,direction:r.field===e&&"asc"===r.direction?"desc":"asc"})))},onFoilSelect:z,isSelected:V,isTemporary:M,filters:w||{brands:[],series:[],type:[]},filterOptions:F})}),x?.(),k&&(0,h.jsx)(a.y,{message:T,type:"success"})]})},g=i.A.create({container:Object.assign({flex:1},{maxWidth:"100%",width:"100%",overflow:"hidden"}),content:Object.assign({flex:1},{padding:0})})},2933:(e,r,t)=>{t.d(r,{o:()=>y});var o=t(6665),n=t(3929),i=t(6283),s=t(5708),a=t(4307),l=t(3668),c=t(558),d=t(4667),u=t(2763),m=t(3600),h=t(5025),p=t(2348),g=t(397);const y=({foils:e,onSort:r,onFoilSelect:t,isSelected:l,isTemporary:p,sortOption:y,columns:x,filters:b,filterOptions:A,selectedFoils:v,onCompare:w,onClearSelection:j})=>{const{width:C}=(0,c.A)(),{colors:S}=(u.Dy,(0,d.D)());(0,o.useEffect)((()=>{(async()=>{try{const e=await(0,m.QZ)();!e||e.field===y.field&&e.ascending===y.ascending||r(e.field)}catch(e){}})()}),[]),(0,o.useEffect)((()=>{(async()=>{try{await(0,m.pC)({field:y.field,ascending:y.ascending})}catch(e){}})()}),[y]);const k=e=>u.lU[e]||150,I=e=>{switch(e){case"brand":return b.brands.length>0;case"series":return b.series.length>0;case"type":return b.type.length>0;default:return!1}},T=(e,r)=>{let t="-";switch(r){case"brand":t=e.brand;break;case"model":t=e.model;break;case"series":t=e.series||"-";break;case"area":t=e.specs?.area?.toFixed(2)||"-";break;case"wingspan":t=e.specs?.wingspan?.toFixed(2)||"-";break;case"aspectRatio":t=e.specs?.aspectRatio?.toFixed(2)||"-";break;case"type":t=e.type||"-";break;case"price":t=e.price?`$${e.price}`:"-";break;case"link":return(0,g.jsxs)(s.A,{style:[f.linkButton,{backgroundColor:S.primary}],onPress:()=>window.open(e.sourceUrl,"_blank"),children:[(0,g.jsx)(i.A,{style:[f.linkText,{color:S.text.inverse}],children:"View"}),(0,g.jsx)(i.A,{style:[f.externalLinkIcon,{color:S.text.inverse}],children:"\u2197"})]})}return(0,g.jsx)(i.A,{style:[f.cellText,{color:S.text.primary},["area","wingspan","aspectRatio","price"].includes(r)&&f.numberText],children:t})},D=(0,u.lD)(x);return(0,g.jsx)(n.A,{style:f.container,children:(0,g.jsx)(a.A,{horizontal:!0,showsHorizontalScrollIndicator:!0,style:f.horizontalScrollView,contentContainerStyle:{width:D,flexGrow:0,margin:0,padding:0},children:(0,g.jsxs)(n.A,{style:[f.tableContent,{width:D}],children:[(0,g.jsx)(n.A,{style:[f.tableHeader,{backgroundColor:S.background.tertiary}],children:(0,g.jsx)(n.A,{style:[f.headerRow,{borderBottomColor:S.border,backgroundColor:S.background.secondary}],children:x.map((e=>{return e.isVisible&&(0,g.jsxs)(s.A,{style:[f.headerCell,{width:k(e.id),borderRightColor:S.text.tertiary+"40",borderBottomColor:I(e.id)?S.primary:S.border,backgroundColor:S.background.tertiary,borderRightWidth:1},I(e.id)&&f.headerCellFiltered],onPress:()=>{return t=e.id,(0,h.k4)(h.R2.SORT_FOILS,{field:t,direction:y.field===t&&y.ascending?"desc":"asc"}),void r(t);var t},children:[(0,g.jsx)(i.A,{style:[f.headerText,{color:I(e.id)?S.primary:S.text.primary,fontWeight:"600"}],children:e.label}),(t=e.id,y.field!==t?(0,g.jsxs)(n.A,{style:f.sortIconContainer,children:[(0,g.jsx)(i.A,{style:[f.sortIcon,{color:S.text.tertiary}],children:"\u25b2"}),(0,g.jsx)(i.A,{style:[f.sortIcon,{color:S.text.tertiary}],children:"\u25bc"})]}):(0,g.jsxs)(n.A,{style:f.sortIconContainer,children:[(0,g.jsx)(i.A,{style:[f.sortIcon,y.ascending&&[f.sortIconUpActive,{color:S.primary}]],children:"\u25b2"}),(0,g.jsx)(i.A,{style:[f.sortIcon,!y.ascending&&[f.sortIconDownActive,{color:S.primary}]],children:"\u25bc"})]}))]},e.id);var t}))})}),(0,g.jsx)(a.A,{style:[f.scrollView,{backgroundColor:S.background.primary}],showsVerticalScrollIndicator:!0,bounces:!1,children:e.map(((e,r)=>{const o=l(e),i=p?.(e),a=`${e.model}-${e.specs?.area||"unknown"}-${r}`;return(0,g.jsx)(s.A,{onPress:()=>t(e),style:({pressed:e})=>[f.row,{borderBottomColor:S.border},r%2===0&&[f.rowEven,{backgroundColor:S.background.secondary+"50"}],o&&[f.rowSelected,{backgroundColor:`${S.primary}15`}],i&&[f.rowTemporary,{backgroundColor:`${S.success}10`}],e&&!o&&[f.rowHovered,{backgroundColor:`${S.primary}10`}]],children:x.map((r=>r.isVisible&&(0,g.jsx)(n.A,{style:[f.cell,{width:k(r.id),borderRightColor:S.border,borderRightWidth:1}],children:T(e,r.id)},`${a}-${r.id}`)))},a)}))})]})})})},f=l.A.create({container:{flex:1,width:"100%",overflow:"hidden"},horizontalScrollView:{flex:1,width:"100%"},tableContent:{flex:1,width:"100%"},tableHeader:{borderBottomWidth:1,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.05,shadowRadius:1,elevation:2},headerRow:{flexDirection:"row",borderBottomWidth:1,width:"100%",minWidth:"fit-content",flexShrink:0},headerCell:Object.assign({flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:p.Y.MEDIUM,borderRightWidth:1,borderBottomWidth:1},{cursor:"pointer",transition:"all 0.2s ease"}),headerCellFiltered:{borderBottomWidth:2},headerText:{fontSize:14,flex:1,letterSpacing:.3},row:Object.assign({flexDirection:"row",borderBottomWidth:1,width:"100%",minWidth:"fit-content",flexShrink:0},{margin:0,padding:0}),rowEven:{},rowSelected:{borderStyle:"solid"},rowHovered:{borderStyle:"solid"},cell:{padding:p.Y.MEDIUM,borderRightWidth:1},cellText:{fontSize:14},numberText:{textAlign:"right"},scrollView:{flex:1},sortIconContainer:{flexDirection:"column",alignItems:"center",height:28,justifyContent:"center",width:16,gap:p.Y.XSMALL,marginLeft:p.Y.SMALL},sortIcon:{fontSize:12,width:12,height:10,lineHeight:10,textAlign:"center"},sortIconUpActive:{fontSize:13},sortIconDownActive:{fontSize:13},linkButton:Object.assign({paddingHorizontal:8,paddingVertical:4,borderRadius:4,minWidth:44,alignItems:"center",position:"relative"},{cursor:"pointer"}),linkText:{fontSize:12,fontWeight:"600"},externalLinkIcon:{position:"absolute",top:0,right:2,fontSize:12,fontWeight:"600"},rowTemporary:{borderStyle:"dashed"}})},9353:(e,r,t)=>{t.d(r,{a:()=>i});var o=t(5229),n=t(397);const i=({title:e,description:r,canonicalUrl:t,imageUrl:i})=>{const s=`${e} | FoilQuiver`;return(0,n.jsxs)(o.mg,{children:[(0,n.jsx)("title",{children:s}),(0,n.jsx)("meta",{name:"description",content:r}),t&&(0,n.jsx)("link",{rel:"canonical",href:t}),(0,n.jsx)("meta",{property:"og:title",content:s}),(0,n.jsx)("meta",{property:"og:description",content:r}),i&&(0,n.jsx)("meta",{property:"og:image",content:i}),(0,n.jsx)("meta",{name:"twitter:title",content:s}),(0,n.jsx)("meta",{name:"twitter:description",content:r}),i&&(0,n.jsx)("meta",{name:"twitter:image",content:i})]})}},8481:(e,r,t)=>{t.d(r,{y:()=>d});var o=t(6665),n=t(6283),i=t(3668),s=t(3233),a=t(4667),l=t(2348),c=t(397);const d=({message:e,type:r="success",duration:t=2e3})=>{const{colors:i}=(0,a.D)(),l=(0,o.useRef)(new s.A.Value(0)).current;(0,o.useEffect)((()=>{s.A.sequence([s.A.timing(l,{toValue:1,duration:200,useNativeDriver:!0}),s.A.delay(t-400),s.A.timing(l,{toValue:0,duration:200,useNativeDriver:!0})]).start()}),[t,l]);return(0,c.jsx)(s.A.View,{style:[u.container,{backgroundColor:(()=>{switch(r){case"success":return i.success;case"error":return i.error;default:return i.primary}})(),opacity:l}],children:(0,c.jsx)(n.A,{style:[u.message,{color:i.text.inverse}],children:e})})},u=i.A.create({container:Object.assign({position:"absolute",bottom:l.Y.LARGE,left:"50%",transform:[{translateX:-150}],minWidth:300,maxWidth:400,padding:l.Y.MEDIUM,borderRadius:8,flexDirection:"row",alignItems:"center",justifyContent:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.15,shadowRadius:8,elevation:4,zIndex:1e3},{cursor:"default",userSelect:"none"}),message:{fontSize:14,fontWeight:"600",textAlign:"center"}})},6680:(e,r,t)=>{t.d(r,{P:()=>n});var o=t(6665);function n(e,r){return{searchedFoils:(0,o.useMemo)((()=>{if(!r.trim())return e;const t=r.toLowerCase().trim();return e.filter((e=>[e.brand,e.model,e.series||"",e.type||"",e.specs?.area?.toString()||"",e.specs?.wingspan?.toString()||"",e.specs?.aspectRatio?.toString()||""].join(" ").toLowerCase().includes(t)))}),[e,r])}}},9058:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(6665);function n(e){const[r,t]=(0,o.useState)({field:"area",direction:"desc"}),n=(0,o.useMemo)((()=>{return t=e,o=r.field,n=r.direction,[...t].sort(((e,r)=>{let t,i;"brand"===o||"series"===o||"model"===o||"type"===o?(t=e[o].toLowerCase(),i=r[o].toLowerCase()):"price"===o?(t=e.price||0,i=r.price||0):o in e.specs?(t=e.specs[o]||0,i=r.specs[o]||0):(t="",i="");const s="asc"===n?1:-1;return"string"===typeof t&&"string"===typeof i?t.localeCompare(i)*s:"number"===typeof t&&"number"===typeof i?(t-i)*s:0}));var t,o,n}),[e,r]);return{sortOption:r,setSortOption:t,sortedFoils:n}}},7358:(e,r,t)=>{t.r(r),t.d(r,{default:()=>O});var o=t(6665),n=t(3929),i=t(3668),s=t(9629),a=t(7821),l=t(6283),c=t(5708),d=t(397);function u({message:e,onRetry:r}){return(0,d.jsxs)(n.A,{style:m.container,children:[(0,d.jsx)(l.A,{style:m.message,children:e}),r&&(0,d.jsx)(c.A,{style:({pressed:e})=>[m.retryButton,e&&m.retryButtonPressed],onPress:r,children:(0,d.jsx)(l.A,{style:m.retryButtonText,children:"Retry"})})]})}const m=i.A.create({container:{padding:20,alignItems:"center",backgroundColor:"#ffebee",borderRadius:8,margin:16},message:{color:"#c62828",fontSize:16,textAlign:"center",marginBottom:12},retryButton:{backgroundColor:"#c62828",paddingHorizontal:20,paddingVertical:10,borderRadius:6},retryButtonPressed:{backgroundColor:"#b71c1c"},retryButtonText:{color:"#fff",fontSize:14,fontWeight:"bold"}});var h=t(5663),p=t(209),g=t(4812),y=t(5648),f=t(415),x=t(4667),b=t(5025),A=t(2348),v=t(382),w=t(2167);const j=({foils:e,allFoils:r,columns:t,quiverName:i="Untitled Quiver",quiverId:s,searchQuery:c="",onSearch:u,onUpdateQuiver:m,onClose:p,isLoading:g,error:A})=>{const{colors:j}=(0,x.D)(),{filters:S,setFilters:k,selectedFoils:I,setSelectedFoils:T}=(0,h.n)(),[D,O]=(0,o.useState)(e),[R,B]=(0,o.useState)(!1),F=(0,w.cq)();(0,o.useEffect)((()=>(k({brands:[],series:[],type:[]}),()=>{k({brands:[],series:[],type:[]})})),[k]),(0,o.useEffect)((()=>{I.length>0&&R&&(O(I),B(!1))}),[I,R]),(0,o.useEffect)((()=>()=>{T([])}),[T]);const N=async()=>{try{D.map((e=>(0,v.h)(e)));await(m?.(D)),B(!1),(0,b.k4)(b.R2.UPDATE_QUIVER,{quiverId:s,quiverName:i,foilCount:D.length})}catch(A){window.alert("Failed to save changes. Please try again.")}},q=()=>{window.confirm("Are you sure you want to revert all changes?")&&(O(e),B(!1))},P=()=>{if(R){window.confirm("You have unsaved changes. Are you sure you want to close?")&&F.navigate("Browse",{})}else F.navigate("Browse",{})};if(g)return(0,d.jsx)(n.A,{style:C.centerContainer,children:(0,d.jsx)(a.I,{})});if(A)return(0,d.jsxs)(n.A,{style:C.centerContainer,children:[(0,d.jsx)(l.A,{style:[C.errorText,{color:j.error}],children:A}),(0,d.jsx)(y.A,{style:[C.retryButton,{backgroundColor:j.primary}],onPress:P,children:(0,d.jsx)(l.A,{style:[C.buttonText,{color:j.text.inverse}],children:"Go Back"})})]});return(0,d.jsx)(n.A,{style:C.container,children:(0,d.jsx)(f.I,{foils:D,allFoils:r,columns:t,searchQuery:c,onSearch:u,onUpdateFoils:e=>{O(e),B(!0)},renderHeader:()=>(0,d.jsxs)(n.A,{style:C.header,children:[(0,d.jsxs)(l.A,{style:[C.headerText,{color:j.text.primary}],children:["Viewing Saved Quiver: ",i]}),R&&(0,d.jsx)(l.A,{style:[C.unsavedText,{color:j.warning}],children:"You have unsaved changes"})]}),renderControls:()=>(0,d.jsx)(n.A,{style:C.controlsContainer,children:(0,d.jsx)(n.A,{style:C.controlsInnerContainer,children:(0,d.jsxs)(n.A,{style:C.controlsColumn,children:[R&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.A,{style:[C.saveButton,{backgroundColor:j.success}],onPress:N,children:(0,d.jsx)(l.A,{style:[C.buttonText,{color:j.text.inverse}],children:"Save Changes"})}),(0,d.jsx)(y.A,{style:[C.revertButton,{backgroundColor:j.warning}],onPress:q,children:(0,d.jsx)(l.A,{style:[C.buttonText,{color:j.text.inverse}],children:"Revert Changes"})})]}),(0,d.jsx)(y.A,{style:[C.closeButton,{backgroundColor:j.primary}],onPress:P,children:(0,d.jsx)(l.A,{style:[C.buttonText,{color:j.text.inverse}],children:"Close Quiver"})})]})})}),filterOptions:{brands:Array.from(new Set(D.map((e=>e.brand)))),series:Array.from(new Set(D.map((e=>e.series)).filter((e=>!!e)))),types:Array.from(new Set(D.map((e=>e.type)).filter((e=>"front"===e||"tail"===e))))},selectedFilters:S,onFilterChange:(e,r)=>{k((t=>Object.assign({},t,{[e]:t[e].includes(r)?t[e].filter((e=>e!==r)):[...t[e],r]})))},onClearFilters:()=>{k({brands:[],series:[],type:[]})}})})},C=i.A.create({container:{flex:1,position:"relative"},centerContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:A.Y.CONTENT_PADDING},header:{padding:A.Y.HEADER_PADDING,borderBottomWidth:1},headerText:{fontSize:20,fontWeight:"600"},unsavedText:{fontSize:14,marginTop:A.Y.SMALL},errorText:{fontSize:16,textAlign:"center",marginBottom:A.Y.LARGE},controlsContainer:Object.assign({position:"absolute",bottom:A.Y.CONTROLS_CONTAINER_BOTTOM,right:0,left:0,paddingHorizontal:A.Y.CONTROLS_CONTAINER_PADDING,zIndex:1e3},{pointerEvents:"none"}),controlsInnerContainer:{alignItems:"flex-end"},controlsColumn:Object.assign({alignItems:"flex-end",gap:A.Y.BUTTON_GAP},{pointerEvents:"auto"}),closeButton:Object.assign({paddingHorizontal:A.Y.BUTTON_PADDING_H,paddingVertical:A.Y.BUTTON_PADDING_V,borderRadius:8},{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),saveButton:Object.assign({paddingHorizontal:A.Y.BUTTON_PADDING_H,paddingVertical:A.Y.BUTTON_PADDING_V,borderRadius:8},{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),revertButton:Object.assign({paddingHorizontal:A.Y.BUTTON_PADDING_H,paddingVertical:A.Y.BUTTON_PADDING_V,borderRadius:8},{cursor:"pointer",pointerEvents:"auto",userSelect:"none",boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),retryButton:Object.assign({paddingHorizontal:A.Y.BUTTON_PADDING_H,paddingVertical:A.Y.BUTTON_PADDING_V,borderRadius:8,marginTop:A.Y.MEDIUM},{cursor:"pointer"}),buttonText:Object.assign({fontSize:14,fontWeight:"600"},{userSelect:"none"})});var S=t(9353),k=t(3295),I=t(8481),T=t(9659);const D=i.A.create({container:{flex:1}}),O=({route:e,navigation:r,searchProps:t,tableSettingsProps:i})=>{const[l,c]=(0,o.useTransition)(),{setCurrentScreen:m,columns:y,setColumns:f,filters:A,setFilters:w,searchQuery:C,setSearchQuery:O,setSelectedFoils:R}=(0,h.n)(),{foils:B=[],loading:F,error:N}=(0,p.J)(),{quivers:q=[],isLoading:P,error:U,deleteQuiver:E,updateQuiver:_,reloadQuivers:Q}=(0,g.X)(),{colors:z}=(0,x.D)(),[V,M]=(0,o.useState)(!1),[Y,L]=(0,o.useState)(""),[W,G]=(0,o.useState)("success"),H=(0,k.Qq)(),$=o.useMemo((()=>e.params?.foil_ids&&Array.isArray(B)?(R([]),B.filter((r=>{if(!r)return!1;const t=(0,v.h)(r);return e.params.foil_ids?.includes(t)??!1}))):[]),[e.params?.foil_ids,B,R]),X=o.useMemo((()=>q.find((r=>r.id===e.params?.quiverId))),[q,e.params?.quiverId]);o.useMemo((()=>({brands:Array.from(new Set(B?.map((e=>e.brand))||[])),series:Array.from(new Set(B?.map((e=>e.series)).filter(Boolean)||[])),types:Array.from(new Set(B?.map((e=>e.type)).filter(Boolean)||[]))})),[B]);(0,o.useEffect)((()=>{m("Quiver"),e.params?.quiverId&&(R([]),Q(),(0,b.oe)(b.R2.VIEW_QUIVER,{quiverId:e.params.quiverId,quiverName:e.params.quiverName||"Untitled Quiver",foilCount:$.length}))}),[e.params?.quiverId]);if(F||P||l)return(0,d.jsx)(s.e,{showFooter:!0,children:(0,d.jsx)(a.I,{})});const J=N||U;return J?(0,d.jsx)(s.e,{showFooter:!0,children:(0,d.jsx)(u,{message:J})}):Array.isArray(B)&&Array.isArray($)?X?(0,d.jsxs)(s.e,{showFooter:!0,children:[(0,d.jsx)(S.a,{title:`${e.params?.quiverName||"Quiver"} - FoilQuiver`,description:`View and manage your ${e.params?.quiverName||"Untitled"} quiver containing ${$.length} foils.`,canonicalUrl:`${H.webUrl}${T.JZ.quiver}/${e.params?.quiverId}`}),(0,d.jsxs)(n.A,{style:D.container,children:[(0,d.jsx)(j,{foils:$,allFoils:B,columns:y,quiverName:e.params?.quiverName||"Untitled Quiver",quiverId:e.params?.quiverId||"",searchQuery:C,onSearch:e=>{O(e),(0,b.k4)(b.R2.SEARCH_FOILS,{screen:"quiver",query:e})},onUpdateQuiver:async t=>{const{quiverId:o}=e.params;try{R(t);const n=t.map((e=>(0,v.h)(e)));await _(o,{foil_ids:n})?(r.setParams({quiverId:o,quiverName:e.params.quiverName||"Untitled Quiver",foil_ids:n,searchQuery:e.params.searchQuery}),await Q(),(0,b.k4)(b.R2.UPDATE_QUIVER,{quiverId:o,quiverName:e.params.quiverName,foilCount:t.length}),L("Quiver updated successfully"),G("success")):(L("Failed to update quiver"),G("error"))}catch(J){L("An error occurred while updating the quiver"),G("error")}M(!0),setTimeout((()=>M(!1)),3e3)},onClose:()=>{c((()=>{r.goBack()}))},isLoading:l,error:J}),V&&(0,d.jsx)(I.y,{message:Y,type:W,duration:3e3})]})]}):(0,d.jsx)(s.e,{showFooter:!0,children:(0,d.jsx)(u,{message:"Quiver not found"})}):(0,d.jsx)(s.e,{showFooter:!0,children:(0,d.jsx)(u,{message:"Invalid data structure received"})})}}}]);
//# sourceMappingURL=358.0888e618.chunk.js.map