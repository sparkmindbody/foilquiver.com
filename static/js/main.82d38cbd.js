(()=>{"use strict";var e={7918:(e,t,r)=>{var l=r(8894),n=r(296),o=r(6665),i=r(6520),a=r(8196),s=r(8833),c=r(3929),d=r(3668),u=r(6283),f=r(5458),h=r(4467),p=r(4307),x=r(467),y=r(3029),g=r(2901),j=r(1087),m=(0,g.default)((function e(){(0,y.default)(this,e)}),null,[{key:"getAllProducts",value:function(){var e=(0,x.default)((function*(){try{if(this.isWeb){try{var e=yield fetch("/data/foils.json");if(e.ok){var t=yield e.json();return console.log(`Loaded ${t.length} products from public/data/foils.json`),t}}catch(c){console.warn("Failed to load from public/data, trying .cache directory...")}try{var r=[];for(var l of["axis-foils.json","code-foils.json","kt-foils.json","uni-foil.json"])try{var n=yield fetch(`/.cache/${l}`);if(!n.ok)continue;var o=yield n.json(),i=l.replace(".json","").split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");o&&(console.log(`Loaded ${o.length} products for ${i} from .cache`),r.push.apply(r,(0,f.default)(o)))}catch(c){console.warn(`Error loading cache file: ${l}`)}if(r.length>0)return r}catch(c){console.warn("Failed to load from .cache directory")}}else{var a=yield j.default.getItem("foils");if(a){var s=JSON.parse(a);return console.log(`Loaded ${s.length} products from AsyncStorage`),s}}}catch(c){console.error("Error loading foils data:",c)}return console.warn("No foils data found"),[]}));return function(){return e.apply(this,arguments)}}()}]);function C(e){var t=(0,o.useState)({field:"area",direction:"asc"}),r=(0,n.default)(t,2),l=r[0],i=r[1],a=(0,o.useMemo)((function(){return t=e,r=l.field,n=l.direction,(0,f.default)(t).sort((function(e,t){var l,o;"brand"===r||"series"===r||"model"===r?(l=e[r].toLowerCase(),o=t[r].toLowerCase()):"price"===r?(l=e.price||0,o=t.price||0):(l=e.specs[r],o=t.specs[r]);var i="asc"===n?1:-1;return"string"===typeof l?l.localeCompare(o)*i:(l-o)*i}));var t,r,n}),[e,l]);return{sortOption:l,setSortOption:i,sortedFoils:a}}m.isWeb=!0;var b=r(5708),v=r(3301),w=r(1518),S=r(397);function T(e){var t=e.filters,r=e.filterOptions,l=e.onBrandFilter,i=e.onSeriesFilter,a=e.onTypeFilter,s=(0,o.useState)(!1),d=(0,n.default)(s,2),f=d[0],h=d[1],p=(0,o.useState)(new v.default.Value(0)),x=(0,n.default)(p,1)[0],y=x.interpolate({inputRange:[0,1],outputRange:[0,300]});return(0,S.jsxs)(c.default,{style:B.container,children:[(0,S.jsxs)(b.default,{onPress:function(){var e=f?0:1;v.default.spring(x,{toValue:e,useNativeDriver:!1}).start(),h(!f)},style:B.header,children:[(0,S.jsx)(u.default,{style:B.headerText,children:"Filters"}),(0,S.jsx)(w.default,{name:f?"chevron-up":"chevron-down",size:24,color:"#666"})]}),(0,S.jsxs)(v.default.View,{style:[B.content,{height:y}],children:[(0,S.jsxs)(c.default,{style:B.filterSection,children:[(0,S.jsx)(u.default,{style:B.filterTitle,children:"Type"}),(0,S.jsxs)(c.default,{style:B.filterButtons,children:[(0,S.jsx)(b.default,{style:[B.filterButton,"front"===t.type&&B.filterButtonActive],onPress:function(){return a("front"===t.type?null:"front")},children:(0,S.jsx)(u.default,{style:[B.filterButtonText,"front"===t.type&&B.filterButtonTextActive],children:"Front"})}),(0,S.jsx)(b.default,{style:[B.filterButton,"tail"===t.type&&B.filterButtonActive],onPress:function(){return a("tail"===t.type?null:"tail")},children:(0,S.jsx)(u.default,{style:[B.filterButtonText,"tail"===t.type&&B.filterButtonTextActive],children:"Tail"})})]})]}),(0,S.jsxs)(c.default,{style:B.filterSection,children:[(0,S.jsx)(u.default,{style:B.filterTitle,children:"Brand"}),(0,S.jsx)(c.default,{style:B.filterButtons,children:r.brands.map((function(e){return(0,S.jsx)(b.default,{style:[B.filterButton,t.brands.includes(e)&&B.filterButtonActive],onPress:function(){return l(e)},children:(0,S.jsx)(u.default,{style:[B.filterButtonText,t.brands.includes(e)&&B.filterButtonTextActive],children:e})},e)}))})]}),(0,S.jsxs)(c.default,{style:B.filterSection,children:[(0,S.jsx)(u.default,{style:B.filterTitle,children:"Series"}),(0,S.jsx)(c.default,{style:B.filterButtons,children:r.series.map((function(e){return(0,S.jsx)(b.default,{style:[B.filterButton,t.series.includes(e)&&B.filterButtonActive],onPress:function(){return i(e)},children:(0,S.jsx)(u.default,{style:[B.filterButtonText,t.series.includes(e)&&B.filterButtonTextActive],children:e})},e)}))})]})]})]})}var B=d.default.create({container:{backgroundColor:"white",borderBottomWidth:1,borderBottomColor:"#eee"},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:12},headerText:{fontSize:16,fontWeight:"bold"},content:{overflow:"hidden"},filterSection:{padding:12,borderTopWidth:1,borderTopColor:"#eee"},filterTitle:{fontSize:14,marginBottom:8,color:"#666"},filterButtons:{flexDirection:"row",flexWrap:"wrap",gap:6,maxHeight:120,overflow:"scroll"},filterButton:{paddingHorizontal:12,paddingVertical:6,borderRadius:16,backgroundColor:"white",borderWidth:1,borderColor:"#ddd",marginBottom:4},filterButtonActive:{backgroundColor:"#007AFF",borderColor:"#007AFF"},filterButtonText:{color:"#333",fontSize:13},filterButtonTextActive:{color:"white"}});function O(e){var t=e.filterOptions,r=e.selectedBrands,l=void 0===r?[]:r,n=e.selectedSeries,o=void 0===n?[]:n,i=e.selectedTypes,a=void 0===i?[]:i,s=e.onFilterChange;return(0,S.jsx)(c.default,{style:P.container,children:(0,S.jsx)(T,{filters:{brands:l,series:o,type:a.length>0?a[0]:null},filterOptions:t,onBrandFilter:function(e){var t=l.includes(e)?l.filter((function(t){return t!==e})):[].concat((0,f.default)(l),[e]);s("brands",t)},onSeriesFilter:function(e){var t=o.includes(e)?o.filter((function(t){return t!==e})):[].concat((0,f.default)(o),[e]);s("series",t)},onTypeFilter:function(e){s("type",e?[e]:[])}})})}var P=d.default.create({container:{padding:8}}),F={METRIC:"cm\xb2",IMPERIAL:"in\xb2"},k={METRIC:"mm",IMPERIAL:"in"};function R(e,t){return`${e}${t}`}var A="#eee",M="#f5f5f5",E="#1c1c1e",I="#e6f3ff",D=12,z=16,W=function(e){var t=e.foils,r=e.sortOption,l=e.onSort,n=e.comparisonMode,i=e.isSelected,a=e.onFoilSelect,s=(0,o.useMemo)((function(){var e={brand:100,series:120,model:160,wingspan:100,area:100,aspectRatio:80,cord:90,type:80,price:90};return t.forEach((function(t){var r,l,n,o=8*((null==(r=t.brand)?void 0:r.length)||0)+3*D;e.brand=Math.max(e.brand,o);var i=8*((null==(l=t.series)?void 0:l.length)||0)+3*D;e.series=Math.max(e.series,i);var a=8*((null==(n=t.model)?void 0:n.length)||0)+3*D;e.model=Math.max(e.model,a)})),e}),[t]),f=d.default.create({container:{flex:1},row:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:A},headerRow:{flexDirection:"row",backgroundColor:M,borderBottomColor:A,borderBottomWidth:1},cell:{padding:D,justifyContent:"center"},textCell:{alignItems:"flex-start"},numericCell:{alignItems:"flex-end"},brandCell:{width:s.brand,flexShrink:0,flexGrow:0},seriesCell:{width:s.series,flexShrink:0,flexGrow:0},modelCell:{width:s.model,flexShrink:0,flexGrow:0},wingspanCell:{width:s.wingspan,flexShrink:0,flexGrow:0},areaCell:{width:s.area,flexShrink:0,flexGrow:0},arCell:{width:s.aspectRatio,flexShrink:0,flexGrow:0},cordCell:{width:s.cord,flexShrink:0,flexGrow:0},typeCell:{width:s.type,flexShrink:0,flexGrow:0},priceCell:{width:s.price,flexShrink:0,flexGrow:0},headerText:{fontWeight:"bold",color:E,flex:1},numericText:{textAlign:"right",width:"100%"},headerContent:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},headerNumericContent:{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",width:"100%",gap:D},sortIndicator:{width:24,textAlign:"center"},selectable:{cursor:"pointer"},selectedRow:{backgroundColor:I},cellContent:{width:"100%"}}),h=function(e){return r.field!==e?"\u25cb":"asc"===r.direction?"\u2191":"\u2193"},x=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,S.jsxs)(c.default,{style:r?f.headerNumericContent:f.headerContent,children:[(0,S.jsx)(u.default,{style:[f.headerText,r&&f.numericText],children:e}),(0,S.jsx)(u.default,{style:f.sortIndicator,children:h(t)})]})};return(0,S.jsx)(p.default,{horizontal:!0,style:f.container,children:(0,S.jsxs)(c.default,{children:[(0,S.jsxs)(c.default,{style:f.headerRow,children:[(0,S.jsx)(b.default,{style:[f.cell,f.textCell,f.brandCell],onPress:function(){return l("brand")},children:x("Brand","brand")}),(0,S.jsx)(b.default,{style:[f.cell,f.textCell,f.seriesCell],onPress:function(){return l("series")},children:x("Series","series")}),(0,S.jsx)(b.default,{style:[f.cell,f.textCell,f.modelCell],onPress:function(){return l("model")},children:x("Model","model")}),(0,S.jsx)(b.default,{style:[f.cell,f.numericCell,f.wingspanCell],onPress:function(){return l("wingspan")},children:x("Wingspan","wingspan",!0)}),(0,S.jsx)(b.default,{style:[f.cell,f.numericCell,f.areaCell],onPress:function(){return l("area")},children:x("Area","area",!0)}),(0,S.jsx)(b.default,{style:[f.cell,f.numericCell,f.arCell],onPress:function(){return l("aspectRatio")},children:x("AR","aspectRatio",!0)}),(0,S.jsx)(b.default,{style:[f.cell,f.numericCell,f.cordCell],onPress:function(){return l("cord")},children:x("Cord","cord",!0)}),(0,S.jsx)(b.default,{style:[f.cell,f.textCell,f.typeCell],onPress:function(){return l("type")},children:x("Type","type")}),(0,S.jsx)(b.default,{style:[f.cell,f.numericCell,f.priceCell],onPress:function(){return l("price")},children:x("Price","price",!0)})]}),t.map((function(e){var t,r=`row-${e.brand}-${e.model}`.toLowerCase().replace(/\s+/g,"-"),l=i(e);return(0,S.jsxs)(b.default,{onPress:function(){n&&(console.log("Toggling selection for:",e.model),a(e))},style:[f.row,l&&f.selectedRow,n&&f.selectable],children:[(0,S.jsx)(c.default,{style:[f.cell,f.textCell,f.brandCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{children:e.brand})})}),(0,S.jsx)(c.default,{style:[f.cell,f.textCell,f.seriesCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{children:e.series})})}),(0,S.jsx)(c.default,{style:[f.cell,f.textCell,f.modelCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{children:e.model})})}),(0,S.jsx)(c.default,{style:[f.cell,f.numericCell,f.wingspanCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{style:f.numericText,children:R(e.specs.wingspan||0,k.METRIC)})})}),(0,S.jsx)(c.default,{style:[f.cell,f.numericCell,f.areaCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{style:f.numericText,children:R(e.specs.area||0,F.METRIC)})})}),(0,S.jsx)(c.default,{style:[f.cell,f.numericCell,f.arCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{style:f.numericText,children:(null==(t=e.specs.aspectRatio)?void 0:t.toFixed(1))||"-"})})}),(0,S.jsx)(c.default,{style:[f.cell,f.numericCell,f.cordCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{style:f.numericText,children:R(e.specs.cord||0,k.METRIC)||"-"})})}),(0,S.jsx)(c.default,{style:[f.cell,f.textCell,f.typeCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{children:e.type.charAt(0).toUpperCase()+e.type.slice(1)})})}),(0,S.jsx)(c.default,{style:[f.cell,f.numericCell,f.priceCell],children:(0,S.jsx)(c.default,{style:f.cellContent,children:(0,S.jsx)(u.default,{style:f.numericText,children:e.price?`$${e.price}`:"-"})})})]},r)}))]})})};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){var t=e.comparisonMode,r=e.selectedFoils,l=e.onCompareStart,n=e.onCompareSelected,o=e.onExitCompare,i=e.isComparisonView,a=void 0!==i&&i;return t?(0,S.jsxs)(c.default,{style:V.comparisonBar,children:[!a&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.default,{style:V.selectionText,children:["Selected: ",r.length]}),(0,S.jsx)(c.default,{style:V.buttonGroup,children:(0,S.jsx)(b.default,{style:[V.button,r.length<2&&V.buttonDisabled],onPress:n,disabled:r.length<2,children:(0,S.jsx)(u.default,{style:V.buttonText,children:"Compare"})})})]}),(0,S.jsx)(b.default,{style:[V.button,V.cancelButton],onPress:o,children:(0,S.jsx)(u.default,{style:V.buttonText,children:"Back"})})]}):(0,S.jsx)(b.default,{style:V.floatingButton,onPress:l,children:(0,S.jsx)(u.default,{style:V.buttonText,children:"Compare Foils"})})}var V=d.default.create({comparisonBar:{position:"absolute",bottom:z,right:z,flexDirection:"row",alignItems:"center",gap:D,backgroundColor:"transparent"},floatingButton:L({position:"absolute",bottom:z,right:z,backgroundColor:"#007AFF",paddingHorizontal:z,paddingVertical:D,borderRadius:8},{boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),buttonGroup:{flexDirection:"row",gap:D},button:L({backgroundColor:"#007AFF",paddingHorizontal:z,paddingVertical:D,borderRadius:8},{boxShadow:"0px 2px 4px rgba(0,0,0,0.1)"}),buttonDisabled:{backgroundColor:"#ccc"},cancelButton:{backgroundColor:"#FF3B30"},buttonText:{color:"white",fontWeight:"600",fontSize:14},selectionText:{fontSize:14,color:"#666",marginRight:D}});function H(e){var t=e.foils;return(0,S.jsx)(p.default,{horizontal:!0,style:N.container,children:(0,S.jsxs)(c.default,{children:[(0,S.jsxs)(c.default,{style:N.headerRow,children:[(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Brand"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Series"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Model"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Wingspan"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Area"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"AR"})}),(0,S.jsx)(c.default,{style:[N.cell,N.headerCell],children:(0,S.jsx)(u.default,{style:N.headerText,children:"Price"})})]}),t.map((function(e){var t;return(0,S.jsxs)(c.default,{style:N.row,children:[(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:e.brand})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:e.series})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:e.model})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:R(e.specs.wingspan,k.METRIC)})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:R(e.specs.area,F.METRIC)})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:(null==(t=e.specs.aspectRatio)?void 0:t.toFixed(1))||"-"})}),(0,S.jsx)(c.default,{style:[N.cell,N.dataCell],children:(0,S.jsx)(u.default,{children:e.price?`$${e.price}`:"-"})})]},`${e.brand}-${e.model}`)}))]})})}var N=d.default.create({container:{flex:1},headerRow:{flexDirection:"row",backgroundColor:M,borderBottomWidth:1,borderBottomColor:A},row:{flexDirection:"row",borderBottomWidth:1,borderBottomColor:A},cell:{padding:D,minWidth:120,justifyContent:"center"},headerCell:{backgroundColor:M},dataCell:{backgroundColor:"white"},headerText:{fontWeight:"bold",color:E}}),Q=r(530);function _(){return(0,S.jsx)(c.default,{style:U.container,children:(0,S.jsx)(Q.default,{size:"large",color:"#0000ff"})})}var U=d.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"}});function J(e){var t=e.message,r=e.onRetry;return(0,S.jsxs)(c.default,{style:q.container,children:[(0,S.jsx)(u.default,{style:q.message,children:t}),r&&(0,S.jsx)(b.default,{style:function(e){var t=e.pressed;return[q.retryButton,t&&q.retryButtonPressed]},onPress:r,children:(0,S.jsx)(u.default,{style:q.retryButtonText,children:"Retry"})})]})}var q=d.default.create({container:{padding:20,alignItems:"center",backgroundColor:"#ffebee",borderRadius:8,margin:16},message:{color:"#c62828",fontSize:16,textAlign:"center",marginBottom:12},retryButton:{backgroundColor:"#c62828",paddingHorizontal:20,paddingVertical:10,borderRadius:6},retryButtonPressed:{backgroundColor:"#b71c1c"},retryButtonText:{color:"#fff",fontSize:14,fontWeight:"bold"}});function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t,r=e.route,l=e.navigation,i=function(){var e=(0,o.useState)([]),t=(0,n.default)(e,2),r=t[0],l=t[1],i=(0,o.useState)(!0),a=(0,n.default)(i,2),s=a[0],c=a[1],d=(0,o.useState)(null),u=(0,n.default)(d,2),f=u[0],h=u[1],p=function(){var e=(0,x.default)((function*(){try{c(!0),h(null);var e=yield m.getAllProducts();l(e)}catch(t){h(t instanceof Error?t.message:"Failed to load foils"),console.error("Error loading foils:",t)}finally{c(!1)}}));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){p()}),[]),{foils:r,loading:s,error:f,refreshFoils:function(){p()}}}(),a=i.foils,s=i.loading,d=i.error,u=i.refreshFoils,y=(null==(t=r.params)?void 0:t.searchQuery)||"",g=function(e,t){return{searchedFoils:(0,o.useMemo)((function(){if(!t.trim())return e;var r=t.toLowerCase().trim();return e.filter((function(e){return[e.brand,e.model,e.series,e.specs.area.toString(),e.specs.wingspan.toString(),e.specs.aspectRatio.toString()].some((function(e){return e.toLowerCase().includes(r)}))}))}),[e,t])}}(a,y),j=function(e){var t=(0,o.useState)({brands:[],series:[],type:null}),r=(0,n.default)(t,2),l=r[0],i=r[1],a=(0,o.useMemo)((function(){var t=Array.from(new Set(e.map((function(e){return e.brand})))),r=(Array.from(new Set(e.map((function(e){return e.series})))),t.reduce((function(t,r){return t[r]=Array.from(new Set(e.filter((function(e){return e.brand===r})).map((function(e){return e.series})))),t}),{})),n=l.type?e.filter((function(e){return e.type===l.type})):e,o=Array.from(new Set(n.map((function(e){return e.series}))));return{brands:t,series:l.brands.length>0?Array.from(new Set(n.filter((function(e){return l.brands.includes(e.brand)})).map((function(e){return e.series})))):o,types:["front","tail"],brandSeries:r}}),[e,l.brands,l.type]),s=(0,o.useMemo)((function(){return e.filter((function(e){var t=0===l.brands.length||l.brands.includes(e.brand),r=0===l.series.length||l.series.includes(e.series),n=!l.type||e.type===l.type;return t&&r&&n}))}),[e,l]);return{filters:l,setFilters:i,filteredFoils:s,filterOptions:a}}(g.searchedFoils),b=j.filters,v=j.setFilters,w=j.filteredFoils,T=j.filterOptions,B=C(w),P=B.sortOption,F=B.setSortOption,k=B.sortedFoils,R=function(){var e=(0,o.useState)(!1),t=(0,n.default)(e,2),r=t[0],l=t[1],i=(0,o.useState)([]),a=(0,n.default)(i,2),s=a[0],c=a[1],d=function(e){return e.id||`${e.brand}-${e.model}`.toLowerCase().replace(/\s+/g,"-")},u=(0,o.useCallback)((function(){l(!0),c([])}),[]),h=(0,o.useCallback)((function(){l(!1),c([])}),[]),p=(0,o.useCallback)((function(e){r&&c((function(t){var r=d(e);return t.some((function(e){return d(e)===r}))?t.filter((function(e){return d(e)!==r})):[].concat((0,f.default)(t),[e])}))}),[r]),x=(0,o.useCallback)((function(e){var t=d(e);return s.some((function(e){return d(e)===t}))}),[s]);return{comparisonMode:r,selectedFoils:s,setComparisonModeOn:u,setComparisonModeOff:h,toggleFoilSelection:p,isSelected:x}}(),A=R.comparisonMode,M=R.selectedFoils,E=R.setComparisonModeOn,I=R.setComparisonModeOff,D=R.toggleFoilSelection,z=R.isSelected,$=(0,o.useState)(!1),L=(0,n.default)($,2),V=L[0],N=L[1];(0,o.useEffect)((function(){console.log("BrowseScreen mounted, loading:",s)}),[s]),(0,o.useEffect)((function(){var e;(null==(e=r.params)?void 0:e.searchQuery)!==y&&l.setParams({searchQuery:y})}),[y,l]);return s?(console.log("Rendering LoadingIndicator"),(0,S.jsx)(_,{})):d?(0,S.jsx)(J,{message:d,onRetry:u}):(0,S.jsxs)(c.default,{style:Z.container,children:[(0,S.jsx)(O,{filterOptions:T,selectedBrands:b.brands,selectedSeries:b.series,selectedTypes:b.type?[b.type]:[],onFilterChange:function(e,t){v("type"===e?function(e){return X(X({},e),{},{type:t.length>0?t[0]:null})}:function(r){return X(X({},r),{},(0,h.default)({},e,t))})},defaultCollapsed:!0}),(0,S.jsx)(p.default,{style:Z.scrollContainer,contentContainerStyle:Z.scrollContent,children:V?(0,S.jsx)(H,{foils:M}):(0,S.jsx)(W,{foils:k,sortOption:P,onSort:function(e){F((function(t){return{field:e,direction:t.field===e&&"asc"===t.direction?"desc":"asc"}}))},comparisonMode:A,isSelected:z,onFoilSelect:D})}),(0,S.jsx)(G,{comparisonMode:A,selectedFoils:M,onCompareStart:function(){E()},onCompareSelected:function(){M.length>=2&&N(!0)},onExitCompare:function(){N(!1),I()},isComparisonView:V})]})}var Z=d.default.create({container:{flex:1,backgroundColor:"#fff"},scrollContainer:{flex:1},scrollContent:{flexGrow:1}}),ee=r(388),te=r(3954),re=r(5501);function le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(le=function(){return!!e})()}var ne=function(e){function t(){var e,r,l,n;(0,y.default)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return r=this,l=t,n=[].concat(i),l=(0,te.default)(l),(e=(0,ee.default)(r,le()?Reflect.construct(l,n||[],(0,te.default)(r).constructor):l.apply(r,n))).state={hasError:!1,error:null},e}return(0,re.default)(t,e),(0,g.default)(t,[{key:"componentDidCatch",value:function(e,t){console.error("Uncaught error:",e,t)}},{key:"render",value:function(){var e;return this.state.hasError?(0,S.jsxs)(c.default,{style:oe.container,children:[(0,S.jsx)(u.default,{style:oe.text,children:"Something went wrong."}),(0,S.jsx)(u.default,{style:oe.errorText,children:null==(e=this.state.error)?void 0:e.message})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}])}(o.Component),oe=d.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20},text:{fontSize:16,marginBottom:10},errorText:{color:"red",fontSize:14}}),ie=r(6773);function ae(e){var t=e.value,r=e.onChangeText,l=e.onClear,n=e.placeholder,o=void 0===n?"Search foils...":n;return(0,S.jsxs)(c.default,{style:se.container,children:[(0,S.jsx)(ie.default,{style:se.input,value:t,onChangeText:r,placeholder:o,placeholderTextColor:"#999",autoCapitalize:"none",autoCorrect:!1}),t.length>0&&(0,S.jsx)(b.default,{style:se.clearButton,onPress:l,children:(0,S.jsx)(u.default,{style:se.clearButtonText,children:"\u2715"})})]})}var se=d.default.create({container:{flexDirection:"row",alignItems:"center",backgroundColor:"#f0f0f0",borderRadius:8,paddingHorizontal:12,marginHorizontal:16,marginVertical:8},input:{flex:1,height:40,fontSize:16,color:"#333"},clearButton:{padding:8},clearButtonText:{color:"#999",fontSize:16,fontWeight:"bold"}}),ce=(0,a.default)();var de=d.default.create({headerContainer:{flexDirection:"row",alignItems:"center",flex:1,paddingHorizontal:16},headerTitle:{fontSize:20,fontWeight:"bold",marginRight:16},searchBar:{flex:1}});(0,l.default)((function(){var e=(0,o.useState)(""),t=(0,n.default)(e,2),r=t[0],l=t[1],a=(0,o.useRef)(null),d=function(e){l(e),a.current&&a.current.setParams({searchQuery:e})};return(0,S.jsx)(ne,{children:(0,S.jsx)(s.SafeAreaProvider,{children:(0,S.jsx)(i.default,{ref:a,children:(0,S.jsx)(ce.Navigator,{children:(0,S.jsx)(ce.Screen,{name:"Browse",component:Y,initialParams:{searchQuery:r},options:{headerTitle:"",headerLeft:function(){return(0,S.jsxs)(c.default,{style:de.headerContainer,children:[(0,S.jsx)(u.default,{style:de.headerTitle,children:"FoilQuiver"}),(0,S.jsx)(ae,{value:r,onChangeText:d,onClear:function(){return d("")},style:de.searchBar})]})},headerStyle:{backgroundColor:"#f4f4f4"}}})})})})})}))}},t={};function r(l){var n=t[l];if(void 0!==n)return n.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,r),o.exports}r.m=e,(()=>{var e=[];r.O=(t,l,n,o)=>{if(!l){var i=1/0;for(d=0;d<e.length;d++){for(var[l,n,o]=e[d],a=!0,s=0;s<l.length;s++)(!1&o||i>=o)&&Object.keys(r.O).every((e=>r.O[e](l[s])))?l.splice(s--,1):(a=!1,o<i&&(i=o));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[l,n,o]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var n,o,[i,a,s]=l,c=0;if(i.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(s)var d=s(r)}for(t&&t(l);c<i.length;c++)o=i[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(d)},l=self.webpackChunkweb=self.webpackChunkweb||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=r.O(void 0,[185],(()=>r(7918)));l=r.O(l)})();
//# sourceMappingURL=main.82d38cbd.js.map